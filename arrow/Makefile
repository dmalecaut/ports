include ../config.mk

PROJECT := arrow
ROOTDIR := arrow
SRCDIR  := $(ROOTDIR)/cpp

MODULES != printf '%s;' $(LIBS)

INSTALLCMD := cmake --install $(BUILDDIR)
BUILDCMD   := cmake --build $(BUILDDIR)
CONFIGCMD  := \
	cmake -Wno-dev -G$(GENERATOR) -B$(BUILDDIR) -S$(SRCDIR) \
		-DCMAKE_PREFIX_PATH="$(MODULES)" \
		-DCMAKE_INSTALL_PREFIX=$(INSTALLDIR) \
		-DCMAKE_BUILD_TYPE=$(BUILDTYPE) \
		-DCMAKE_C_COMPILER=$(CC) \
		-DCMAKE_CXX_COMPILER=$(CXX) \
		-DCMAKE_CXX_FLAGS="$(CXXFLAGS)" \
		-DCMAKE_STATIC_LINKER_FLAGS="$(LDFLAGS)" \
		-DCMAKE_SHARED_LINKER_FLAGS="$(LDFLAGS)" \
		-DCMAKE_EXE_LINKER_FLAGS="$(LDFLAGS)" \
		-DBUILD_SHARED_LIBS=TRUE \
    -DCMAKE_AR=$(AR) \
    -DCMAKE_STRIP=$(STRIP) \
    -DCMAKE_LINKER=$(LD) \
    -DCMAKE_RANLIB=$(RANLIB) \
    -DCMAKE_OBJCOPY=$(OBJCOPY) \
		-DARROW_CXXFLAGS="$(CXXFLAGS)" \
		-DARROW_BUILD_STATIC=OFF \
		-DARROW_BUILD_SHARED=ON \
		-DARROW_BUILD_UTILITIES=ON \
		-DARROW_COMPUTE=ON \
		-DARROW_CSV=ON \
		-DARROW_FLIGHT=ON \
		-DARROW_WITH_SNAPPY=ON

include ../build.mk
